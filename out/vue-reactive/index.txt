1:"$Sreact.fragment"
2:I[9019,["252","static/chunks/252-c08bd2e6e79378f4.js","25","static/chunks/app/%5Bslug%5D/layout-c8e9a29bffafb4da.js"],"default"]
3:I[4172,["252","static/chunks/252-c08bd2e6e79378f4.js","182","static/chunks/app/%5Bslug%5D/page-8d1acff9edb9c31b.js"],"default"]
4:I[505,[],""]
5:I[6221,[],""]
7:I[1327,[],"MetadataBoundary"]
9:I[1327,[],"OutletBoundary"]
c:I[9989,[],"AsyncMetadataOutlet"]
e:I[1327,[],"ViewportBoundary"]
10:I[7992,[],""]
:HL["/_next/static/media/1f3fe8c6df3d47c1-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/4f05ba3a6752a328-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/82050c55ac1c8c11-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/48df2138df2e6856.css","style"]
:HL["/_next/static/css/7198505728be4078.css","style"]
:HL["/_next/static/css/354c4f287ddbdae0.css","style"]
:HL["/_next/static/css/56ee663620872bf0.css","style"]
0:{"P":null,"b":"QpSHpR0C-SmZGHI7UkrYg","p":"","c":["","vue-reactive",""],"i":false,"f":[[["",{"children":[["slug","vue-reactive","d"],{"children":["__PAGE__",{}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/48df2138df2e6856.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/7198505728be4078.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/354c4f287ddbdae0.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","className":"__className_577ed0","children":["$","body",null,{"className":"mx-auto max-w-2xl bg-[--bg] px-5 py-12 text-[--text]","children":[["$","header",null,{"className":"mb-14 flex flex-row place-content-between","children":[["$","$L2",null,{}],["$","span",null,{"className":"relative top-[4px] italic","children":["by"," ",["$","$L3",null,{"href":"https://swanine.com","target":"_blank","children":["$","img",null,{"alt":"Swanine","src":"https://avatars.githubusercontent.com/u/52339771?v=4","className":"relative -top-1 mx-1 inline h-8 w-8 rounded-full"}]}]]}]]}],["$","main",null,{"children":["$","$L4",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","article",null,{"className":"markdown","children":[["$","h1",null,{"className":"__className_096e99 text-[40px] font-black leading-[44px] text-[--title]","children":"Not found"}],["$","div",null,{"className":"markdown mt-10","children":[["$","p",null,{"children":"This page doesn't exist (yet?)"}],["$","p",null,{"children":["I recently rewrote the site so maybe something broke. Please"," ",["$","$L3",null,{"href":"https://github.com/swanine","children":"complain here."}]]}],["$","p",null,{"children":["If you're looking for translated posts, they're not on the site anymore but you can find"," ",["$","$L3",null,{"href":"https://github.com/swanine","children":"an archive of them here."}]]}],["$","p",null,{"children":"Hope you'll find what you're looking for."}]]}]]}],[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/56ee663620872bf0.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]}]]}],{"children":[["slug","vue-reactive","d"],["$","$1","c",{"children":[null,[["$","$L4",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}],["$","footer",null,{"className":"mt-12","children":["$","$L2",null,{}]}]]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L6",["$","$L7",null,{"children":"$L8"}],[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/56ee663620872bf0.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L9",null,{"children":["$La","$Lb",["$","$Lc",null,{"promise":"$@d"}]]}]]}],{},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","1qYguHr-zRGWByXLECGnq",{"children":[["$","$Le",null,{"children":"$Lf"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],null]}],false]],"m":"$undefined","G":["$10","$undefined"],"s":false,"S":true}
11:"$Sreact.suspense"
12:I[9989,[],"AsyncMetadata"]
8:["$","$11",null,{"fallback":null,"children":["$","$L12",null,{"promise":"$@13"}]}]
b:null
f:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
a:null
6:["$","article",null,{"children":[["$","h1",null,{"className":"__className_096e99 text-[40px] font-black leading-[44px] text-[--title]","children":"别拿“父传子、子传父”吓我了"}],["$","p",null,{"className":"mt-2 text-[13px] text-gray-700 dark:text-gray-300","children":"December 11, 2023"}],["$","div",null,{"className":"markdown mt-10","children":["$L14",["$","hr",null,{}],["$","p",null,{"children":[["$","$L3",null,{"href":"https://bsky.app/search?q=https%3A%2F%2Foverreacted.io%2Fvue-reactive%2F","children":"Discuss on Bluesky"}],"  ·  ",["$","$L3",null,{"href":"https://github.com/swanine","children":"Edit on GitHub"}]]}]]}]]}]
13:{"metadata":[["$","title","0",{"children":"别拿“父传子、子传父”吓我了 — overreacted"}],["$","meta","1",{"name":"description","content":"献给在 props、emit、eventBus、provide/inject 之间迷失的你"}],["$","link","2",{"rel":"icon","href":"/icon.png?e0852c1e2c7f0e65","type":"image/png","sizes":"329x329"}]],"error":null,"digest":"$undefined"}
d:{"metadata":"$13:metadata","error":null,"digest":"$undefined"}
14:[["$","p",null,{"children":["我们从小就被告诫，组件之间要“数据单向流动”。Vue 也这样教我们：\n",["$","strong",null,{"children":["父组件通过 ",["$","code",null,{"children":"props"}]," 给子组件传值，子组件通过 ",["$","code",null,{"children":"$$emit"}]," 通知父组件某个事件发生了"]}],"。"]}],"\n",["$","p",null,{"children":"但你写久了之后就会发现：\n这事儿根本没那么简单。"}],"\n",["$","p",null,{"children":["场景一复杂，层级一多，Vue 的组件通信就会逐渐从“清水煮白菜”变成了“七大姑八大姨串门”——一个 ",["$","code",null,{"children":"props"}]," 传了五层，一个 ",["$","code",null,{"children":"emit"}]," 被转发三手，一个兄弟组件用全局事件乱吼……"]}],"\n",["$","p",null,{"children":"别慌，其实这些情况很常见，只是我们以前在学组件通信的时候，太过理想化了。"}],"\n",["$","p",null,{"children":"这篇文章我就想聊聊：Vue 组件通信这回事，应该怎么看、怎么写、怎么不把自己写崩。"}],"\n",["$","hr",null,{}],"\n",["$","h4",null,{"children":"🧭 组件通信的五大派别（别背 API，先理解思路）"}],"\n",["$","p",null,{"children":"Vue 组件通信，其实就这几个套路，每一种都有适合它的“场景生态位”："}],"\n",["$","table",null,{"class":"grid w-full grid-cols-[auto_auto] border-b border-gray-900/10 dark:border-white/10","children":[["$","thead",null,{"class":"col-span-3 grid grid-cols-subgrid","children":["$","tr",null,{"class":"col-span-3 grid grid-cols-subgrid","children":[["$","th",null,{"class":"px-2 py-2.5 text-left text-sm/7 font-semibold text-gray-950 dark:text-white","children":"通信方式"}],["$","th",null,{"class":"px-2 py-2.5 text-left text-sm/7 font-semibold text-gray-950 dark:text-white","children":"适合场景"}],["$","th",null,{"class":"px-2 py-2.5 text-left text-sm/7 font-semibold text-gray-950 dark:text-white","children":"特点"}]]}]}],["$","tbody",null,{"class":"col-span-3 grid grid-cols-subgrid border-t border-gray-900/10 dark:border-white/10","children":[["$","tr",null,{"class":"col-span-3 grid grid-cols-subgrid border-b border-gray-950/5 dark:border-white/5","children":[["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"props / emit"}],["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"父子之间"}],["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"单向传值、简单直白"}]]}],["$","tr",null,{"class":"col-span-3 grid grid-cols-subgrid border-b border-gray-950/5 dark:border-white/5","children":[["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"provide / inject"}],["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"跨层级的祖孙关系"}],["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"解耦、隐式依赖"}]]}],["$","tr",null,{"class":"col-span-3 grid grid-cols-subgrid border-b border-gray-950/5 dark:border-white/5","children":[["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"事件总线（eventBus）"}],["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"松耦合兄弟、跨组件"}],["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"灵活但容易失控"}]]}],["$","tr",null,{"class":"col-span-3 grid grid-cols-subgrid border-b border-gray-950/5 dark:border-white/5","children":[["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"Vuex / Pinia"}],["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"跨页面、跨组件、共享状态"}],["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"官方推荐、适合复杂项目"}]]}],["$","tr",null,{"class":"col-span-3 grid grid-cols-subgrid not-last:border-b not-last:border-gray-950/5 dark:not-last:border-white/5","children":[["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"自定义 hooks / composables"}],["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"可复用状态逻辑"}],["$","td",null,{"class":"px-2 py-2 align-top font-mono text-xs/6 font-medium ","children":"灵活组合、自带响应性"}]]}]]}]]}],"\n",["$","p",null,{"children":["这些方式没有对错，",["$","strong",null,{"children":"关键看你项目的规模和数据流动的复杂度"}],"。"]}],"\n",["$","h3",null,{"children":"🧒 父传子、子传父：新手村里的套路，也有进阶写法"}],"\n",["$","p",null,{"children":["Vue 最基础的通信方式就是 ",["$","code",null,{"children":"props"}]," 和 ",["$","code",null,{"children":"$$emit"}],"，学起来简单，但写起来其实也能很“优雅”。"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"✅ 正常写法："}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"vue","data-theme":"default","children":["$","code",null,{"data-language":"vue","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"<!-- 父组件 -->"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"MyInput"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" :"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"value="}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"username"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" @"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"update="}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"username "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" $event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"/>"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"<!-- 子组件 -->"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"template"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"input"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" :value="}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"value"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#C792EA"},"children":" @input="}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"$$emit('update', $event.target.value)"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#C792EA"},"children":" />"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"template"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"script"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"setup>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"defineProps"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(["}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"value"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"])"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"defineEmits"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(["}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"update"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"])"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"script"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}]]}]}]}],"\n",["$","p",null,{"children":"这就是我们常说的“受控组件”：父组件管控数据，子组件通知变化。"}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"🚀 更进一步：v-model 语法糖"}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"vue","data-theme":"default","children":["$","code",null,{"data-language":"vue","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"<!-- 父组件 -->"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"MyInput"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"v-model="}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"username"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"/>"}]]}]]}]}]}],"\n",["$","p",null,{"children":["你以为这是语法糖，其实底层就是 ",["$","code",null,{"children":":modelValue"}]," + ",["$","code",null,{"children":"@update:modelValue"}],"，Vue 帮你自动做了参数和事件名的约定而已。"]}],"\n",["$","p",null,{"children":"写起来舒服多了，也方便统一封装一堆表单类组件。"}],"\n",["$","hr",null,{}],"\n",["$","h3",null,{"children":"👴 provide / inject：爷爷给孙子发钱，谁也别告诉爸爸"}],"\n",["$","p",null,{"children":["当你 ",["$","code",null,{"children":"props"}]," 传了三四层，组件都在当“中转站”时，就该考虑换个思路了。"]}],"\n",["$","p",null,{"children":["Vue 提供了 ",["$","code",null,{"children":"provide"}]," / ",["$","code",null,{"children":"inject"}],"，可以让",["$","strong",null,{"children":"祖先组件向任意后代组件提供数据"}],"，后代随用随取，不需要层层传递。"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"js","data-theme":"default","children":["$","code",null,{"data-language":"js","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// App.vue"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"provide"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"theme"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"dark"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// Button.vue（第5层）"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"theme"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"inject"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"theme"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}]]}]]}]}]}],"\n",["$","p",null,{"children":"这套机制适合“全局但不常变的数据”，比如主题、语言、配置项等等。"}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"❗ 提醒：虽然它很方便，但用多了容易让组件间关系变得隐蔽，阅读成本高。所以更适合“结构性通信”，不太适合“业务值通信”。"}],"\n"]}],"\n",["$","hr",null,{}],"\n",["$","h3",null,{"children":"🤝 兄弟组件通信：你俩又不认识，别硬聊！"}],"\n",["$","p",null,{"children":["兄弟组件不能直接用 ",["$","code",null,{"children":"props/emit"}],"，但有时偏偏要互动，比如："]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"左边的侧边栏点击切换，右边内容区要响应"}],"\n",["$","li",null,{"children":"表格和分页是兄弟组件，共享查询参数"}],"\n"]}],"\n",["$","p",null,{"children":"这时有几种方式可以解耦："}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"✅ 共享父组件作为“中介人”"}]}],"\n",["$","p",null,{"children":["父组件统一管理状态，两个兄弟通过 ",["$","code",null,{"children":"props"}]," 和 ",["$","code",null,{"children":"emit"}]," 各自接入。"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"💣 用 eventBus 快速接上（但别上瘾）"}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"js","data-theme":"default","children":["$","code",null,{"data-language":"js","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// eventBus.js"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"export const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"eventBus"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"mitt"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// A组件"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"eventBus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"search"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"关键词"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// B组件"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"eventBus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"on"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"search"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"val"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"doSearch"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"val"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"})"}]]}]]}]}]}],"\n",["$","p",null,{"children":"这方式快捷灵活，但容易到处注册/解绑，特别容易内存泄漏 or 逻辑混乱。建议小项目或 demo 里用用，别做核心依赖。"}],"\n",["$","hr",null,{}],"\n",["$","h3",null,{"children":"🏢 Pinia / Vuex：让组件都变成“打工人”"}],"\n",["$","p",null,{"children":"如果一个状态不仅要被多个组件使用，还要长期存在（比如用户信息、购物车数据、权限表），这时候你就该上 Pinia 了。"}],"\n",["$","p",null,{"children":"它其实是一个“响应式的数据工厂”：你在里面定义状态、动作，组件从中取用和更新，一切都响应式同步。"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"js","data-theme":"default","children":["$","code",null,{"data-language":"js","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// store/user.js"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"export const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"useUserStore"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"defineStore"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"user"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"小张"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" token"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"''"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"  "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"actions"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"logout"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"token "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"''"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"})"}]}]]}]}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"vue","data-theme":"default","children":["$","code",null,{"data-language":"vue","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"script"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"setup>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"user"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useUserStore"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"user"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 响应式的"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"script"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}]]}]}]}],"\n",["$","p",null,{"children":"现在 Vue 的状态管理，已经越来越模块化、组合化，Pinia 比 Vuex 更轻量，语法也更现代。"}],"\n",["$","hr",null,{}],"\n",["$","h3",null,{"children":"🧩 自定义 composable：组件通信之外的终极解耦武器"}],"\n",["$","p",null,{"children":["最后介绍一个高手段：",["$","strong",null,{"children":"提取状态和逻辑到"}]," ",["$","code",null,{"children":"useXXX()"}]," ** composable 函数中**，多个组件使用同一个逻辑，就天然“通信”了。"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"js","data-theme":"default","children":["$","code",null,{"data-language":"js","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// useCounter.js"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"import"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" ref "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"from"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"vue"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"ref"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"export"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useCounter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"inc"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"value"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"++"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"vue","data-theme":"default","children":["$","code",null,{"data-language":"vue","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"script"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"setup>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const { "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"inc"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" } "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useCounter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"script"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}]]}]}]}],"\n",["$","p",null,{"children":["多个组件引入 ",["$","code",null,{"children":"useCounter()"}],"，他们看到的是同一个 ",["$","code",null,{"children":"count"}]," 实例，就天然共享状态了。"]}],"\n",["$","p",null,{"children":"这是一种“状态即服务”的思路，非常适合复杂场景下的组件复用。"}],"\n",["$","hr",null,{}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"text","data-theme":"default","children":["$","code",null,{"data-language":"text","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D6D9E0"},"children":"  简单 ➝ ➝ ➝ ➝ ➝ ➝ ➝ ➝ ➝ 复杂"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D6D9E0"},"children":"[props/emit] → [provide/inject] → [eventBus] → [Pinia] → [composables]"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#D6D9E0"},"children":"   ⬆️适合父子     ⬆️适合祖孙     ⬆️松耦合     ⬆️全局状态     ⬆️抽象逻辑"}]}]]}]}]}],"\n",["$","p",null,{"children":"别再纠结“组件通信怎么选”了。选什么方式其实只取决于两件事："}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"谁要通信？"}],"\n",["$","li",null,{"children":"状态在哪维护、谁能控制？"}],"\n"]}],"\n",["$","p",null,{"children":"把这两个问题答清楚，通信方式自然水落石出。"}],"\n",["$","h3",null,{"children":"🐾 最后的叮咛"}],"\n",["$","p",null,{"children":"Vue 的组件通信不复杂，复杂的是“业务本身的耦合”。"}],"\n",["$","p",null,{"children":"你与其追求“通信方式要高级”，不如先让你的状态更清晰、结构更合理。通信只是表象，本质上我们是想让状态保持“合理流动”。"}],"\n",["$","p",null,{"children":"用对方式，就像选对交通工具：近就走路，远就开车，再远就坐高铁。别拿走路去赶高铁，别拿高铁去串门。"}]]
